"use strict";(self.webpackChunkdemoecomm=self.webpackChunkdemoecomm||[]).push([[1172],{1172:(e,a,n)=>{n.r(a),n.d(a,{default:()=>y});var l=n(5043),d=n(3216),o=n(2774),s=n(2141),r=n(9657),i=n(3731),m=n(3892),t=n(899),v=n(6213),_=n(8366),c=n(3041),p=n(1686),h=n(164),g=n(8655),u=n(5337),x=n(8223),j=n(579);const y=function(){var e;const a=(0,d.g)(),[n,y]=(0,l.useState)(!1),A=(0,d.Zp)(),[C,N]=(0,l.useState)(),[k,f]=(0,l.useState)({v_name:"",v_email:"",v_gst:"",v_pan:"",v_reg:"",v_remarks:"",v_address:"",dynamicFields:[{sl_no:0,poc_name:"",poc_ph_1:"",poc_ph_2:""}]}),F={v_name:"",v_email:"",v_phone:"",v_gst:"",v_pan:"",v_reg:"",v_remarks:"",v_address:"",dynamicFields:[{sl_no:a.id>0?0:null===k||void 0===k||null===(e=k.dynamicFields[0])||void 0===e?void 0:e.sl_no,poc_name:"",poc_ph_1:"",poc_ph_2:""}]},b=t.Ik({v_name:t.Yj().required("Name is required"),v_email:t.Yj().required("Email is required").email("Incorrect email format"),v_phone:t.Yj().required("Phone is required").length(10),v_address:t.Yj().required("Address is required"),v_pan:t.Yj(),v_gst:t.Yj(),v_remarks:t.Yj(),dynamicFields:t.YO().of(t.Ik().shape({poc_name:t.Yj().required("Contact person is required"),poc_ph_1:t.Yj().required("Phone is required").length(10),poc_ph_2:t.Yj().required("Phone is required").length(10)}))});return(0,l.useEffect)((()=>{+a.id>0&&(y(!0),v.A.post(c.O+"/api/getvendor",{id:a.id}).then((e=>{var a,n,l,d,o,s,r,i,m,t,v,_,c,p,h,g,u,x,j,A,C;console.log(e.data.msg.desig_name),y(!1),N(null===(a=e.data)||void 0===a?void 0:a.msg),f({v_name:null===(n=e.data)||void 0===n||null===(l=n.msg)||void 0===l?void 0:l.vendor_name,v_email:null===(d=e.data)||void 0===d||null===(o=d.msg)||void 0===o?void 0:o.vendor_email,poc_name:null===(s=e.data)||void 0===s||null===(r=s.msg)||void 0===r?void 0:r.vendor_contact,poc_ph_1:null===(i=e.data)||void 0===i||null===(m=i.msg)||void 0===m?void 0:m.vendor_phone,poc_ph_2:null===(t=e.data)||void 0===t||null===(v=t.msg)||void 0===v?void 0:v.vendor_phone,v_remarks:null===(_=e.data)||void 0===_||null===(c=_.msg)||void 0===c?void 0:c.vendor_remarks,v_gst:null===(p=e.data)||void 0===p||null===(h=p.msg)||void 0===h?void 0:h.vendor_gst,v_pan:null===(g=e.data)||void 0===g||null===(u=g.msg)||void 0===u?void 0:u.vendor_pan,v_reg:null===(x=e.data)||void 0===x||null===(j=x.msg)||void 0===j?void 0:j.vendor_reg,v_address:null===(A=e.data)||void 0===A||null===(C=A.msg)||void 0===C?void 0:C.vendor_address})})).catch((e=>{console.log(e),A("/error/"+e.code+"/"+e.message)})),v.A.post(c.O+"/api/getvendor",{id:a.id}).then((e=>{console.log(e.data.msg.desig_name),y(!1),f({...F,v_name:e.data.msg.vendor_name,v_email:e.data.msg.vendor_email,v_phone:e.data.msg.vendor_phone,v_gst:e.data.msg.vendor_gst,v_pan:e.data.msg.vendor_pan,v_reg:e.data.msg.vendor_reg,v_remarks:e.data.msg.vendor_remarks,v_address:e.data.msg.vendor_address})})),v.A.post(c.O+"/api/getvendorpoc",{id:a.id}).then((e=>{console.log(e.data.msg[0],"res getvendorpoc"),f((a=>({...a,dynamicFields:e.data.msg.map((e=>({sl_no:e.sl_no,poc_name:e.poc_name,poc_ph_1:e.poc_ph_1,poc_ph_2:e.poc_ph_2})))}))),y(!1)})))}),[]),console.log(a,"params"),(0,j.jsxs)("section",{className:"bg-transparent dark:bg-[#001529]",children:[(0,j.jsx)(s.A,{text:a.id>0?"Update vendor":"Add vendor",mode:a.id>0?1:0,title:"Vendor",data:a.id&&C?C:""}),(0,j.jsx)("div",{className:"w-full bg-white p-6 rounded-2xl",children:(0,j.jsx)(p.A,{indicator:(0,j.jsx)(h.A,{spin:!0}),size:"large",className:"text-green-900 dark:text-gray-400",spinning:n,children:(0,j.jsx)(m.l1,{initialValues:+a.id>0?k:F,validationSchema:b,onSubmit:e=>{console.log("onsubmit called"),console.log(e),y(!0),v.A.post(c.O+"/api/addVendor",{v_id:+a.id,user:localStorage.getItem("email"),v_name:e.v_name,v_email:e.v_email,v_phone:e.v_phone.toString(),v_gst:e.v_gst,v_pan:e.v_pan,v_reg:e.v_reg,v_remarks:e.v_remarks,v_address:e.v_address,v_poc:e.dynamicFields}).then((e=>{y(!1),e.data.suc>0?(0,_.Q)("success",e.data.msg):(0,_.Q)("error",e.data.msg)})).catch((e=>{console.log(e),A("/error/"+e.code+"/"+e.message)}))},validateOnMount:!0,enableReinitialize:!0,children:e=>{let{values:n,handleChange:d,handleBlur:s,handleSubmit:t,errors:v,touched:_}=e;return(0,j.jsxs)("form",{onSubmit:t,children:[(0,j.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 sm:gap-6",children:[(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Type name...",type:"text",label:"Vendor name",name:"v_name",formControlName:n.v_name,handleChange:d,handleBlur:s,mode:1}),v.v_name&&_.v_name?(0,j.jsx)(r.A,{title:v.v_name}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type Phone No....",type:"text",label:"Vendor phone No.",name:"v_phone",formControlName:n.v_phone,handleChange:d,handleBlur:s,mode:1}),v.v_phone&&_.v_phone?(0,j.jsx)(r.A,{title:v.v_phone}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type email...",type:"text",label:"Vendor email",name:"v_email",formControlName:n.v_email,handleChange:d,handleBlur:s,mode:1}),v.v_email&&_.v_email?(0,j.jsx)(r.A,{title:v.v_email}):null]}),(0,j.jsx)("div",{className:"sm:col-span-2 -mt-4",children:(0,j.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3 sm:gap-6",children:[(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type GST...",type:"text",label:"GST",name:"v_gst",formControlName:n.v_gst,handleChange:d,handleBlur:s,mode:1}),v.v_gst&&_.v_gst?(0,j.jsx)(r.A,{title:v.v_gst}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type PAN...",type:"text",label:"PAN",name:"v_pan",formControlName:n.v_pan,handleChange:d,handleBlur:s,mode:1}),v.v_pan&&_.v_pan?(0,j.jsx)(r.A,{title:v.v_pan}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type registration. no. ...",type:"text",label:"Registration no.",name:"v_reg",formControlName:n.v_reg,handleChange:d,handleBlur:s,mode:1}),v.v_reg&&_.v_reg?(0,j.jsx)(r.A,{title:v.v_reg}):null]})]})}),(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Lorem Ipsum Dolor Sit...",type:"text",label:"Deals in",name:"v_remarks",formControlName:n.v_remarks,handleChange:d,handleBlur:s,mode:3}),v.v_remarks&&_.v_remarks?(0,j.jsx)(r.A,{title:v.v_remarks}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Type vendor address here...",type:"text",label:"Address",name:"v_address",formControlName:n.v_address,handleChange:d,handleBlur:s,mode:3}),v.v_address&&_.v_address?(0,j.jsx)(r.A,{title:v.v_address}):null]}),(0,j.jsx)(m.ED,{name:"dynamicFields",children:e=>{var a;let{push:o,remove:m}=e;return(0,j.jsxs)(j.Fragment,{children:[null===(a=n.dynamicFields)||void 0===a?void 0:a.map(((e,a)=>{var n,o,t,c,p,h,u,x,y,A,C,N;return(0,j.jsxs)(l.Fragment,{children:[(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Type contact person name...",type:"text",label:"Contact person name",name:"dynamicFields[".concat(a,"].poc_name"),formControlName:e.poc_name,handleChange:d,handleBlur:s,mode:1}),null!==(n=v.dynamicFields)&&void 0!==n&&null!==(o=n[a])&&void 0!==o&&o.poc_name&&null!==(t=_.dynamicFields)&&void 0!==t&&null!==(c=t[a])&&void 0!==c&&c.poc_name?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_name}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type contact person primary phone...",type:"text",label:"Contact person primary phone no.",name:"dynamicFields[".concat(a,"].poc_ph_1"),formControlName:e.poc_ph_1,handleChange:d,handleBlur:s,mode:1}),null!==(p=v.dynamicFields)&&void 0!==p&&null!==(h=p[a])&&void 0!==h&&h.poc_ph_1&&null!==(u=_.dynamicFields)&&void 0!==u&&null!==(x=u[a])&&void 0!==x&&x.poc_ph_1?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_ph_1}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type contact secondary person phone...",type:"text",label:"Contact person secondary phone no.",name:"dynamicFields[".concat(a,"].poc_ph_2"),formControlName:e.poc_ph_2,handleChange:d,handleBlur:s,mode:1}),null!==(y=v.dynamicFields)&&void 0!==y&&null!==(A=y[a])&&void 0!==A&&A.poc_ph_2&&null!==(C=_.dynamicFields)&&void 0!==C&&null!==(N=C[a])&&void 0!==N&&N.poc_ph_2?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_ph_2}):null]}),(0,j.jsx)("div",{className:"sm:col-span-2",children:(0,j.jsx)(g.A,{onClick:()=>m(a)})})]},a)})),(0,j.jsx)("div",{className:"sm:col-span-2",children:(0,j.jsx)(x.Ay,{type:"dashed",onClick:()=>o({sl_no:0,poc_name:"",poc_ph_1:""}),icon:(0,j.jsx)(u.A,{}),children:"Add field"})})]})}})]}),(0,j.jsx)(o.A,{mode:a.id>0?"E":"A"})]})}})})})]})}}}]);
//# sourceMappingURL=1172.358a5d36.chunk.js.map