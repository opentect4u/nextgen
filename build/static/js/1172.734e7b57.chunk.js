"use strict";(self.webpackChunkdemoecomm=self.webpackChunkdemoecomm||[]).push([[1172],{1172:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});var n=l(5043),d=l(3216),o=l(8834),s=l(2141),r=l(9657),i=l(3731),m=l(3892),t=l(899),v=l(6213),_=l(8366),c=l(3041),p=l(1686),h=l(164),g=l(8655),u=l(5337),x=l(8223),j=l(579);const y=function(){var e;const a=(0,d.g)(),[l,y]=(0,n.useState)(!1),A=(0,d.Zp)(),[C,N]=(0,n.useState)({v_name:"",v_email:"",v_gst:"",v_pan:"",v_reg:"",v_remarks:"",v_address:"",dynamicFields:[{sl_no:0,poc_name:"",poc_ph_1:"",poc_ph_2:""}]}),k={v_name:"",v_email:"",v_phone:"",v_gst:"",v_pan:"",v_reg:"",v_remarks:"",v_address:"",dynamicFields:[{sl_no:a.id>0?0:null===C||void 0===C||null===(e=C.dynamicFields[0])||void 0===e?void 0:e.sl_no,poc_name:"",poc_ph_1:"",poc_ph_2:""}]},f=t.Ik({v_name:t.Yj().required("Name is required"),v_email:t.Yj().required("Email is required").email("Incorrect email format"),v_phone:t.Yj().required("Phone is required").length(10),v_address:t.Yj().required("Address is required"),v_pan:t.Yj(),v_gst:t.Yj(),v_remarks:t.Yj(),dynamicFields:t.YO().of(t.Ik().shape({poc_name:t.Yj().required("Contact person is required"),poc_ph_1:t.Yj().required("Phone is required").length(10),poc_ph_2:t.Yj().required("Phone is required").length(10)}))});return(0,n.useEffect)((()=>{+a.id>0&&(y(!0),v.A.post(c.O+"/api/getvendor",{id:a.id}).then((e=>{var a,l,n,d,o,s,r,i,m,t,v,_,c,p,h,g,u,x,j,A;console.log(e.data.msg.desig_name),y(!1),N({v_name:null===(a=e.data)||void 0===a||null===(l=a.msg)||void 0===l?void 0:l.vendor_name,v_email:null===(n=e.data)||void 0===n||null===(d=n.msg)||void 0===d?void 0:d.vendor_email,poc_name:null===(o=e.data)||void 0===o||null===(s=o.msg)||void 0===s?void 0:s.vendor_contact,poc_ph_1:null===(r=e.data)||void 0===r||null===(i=r.msg)||void 0===i?void 0:i.vendor_phone,poc_ph_2:null===(m=e.data)||void 0===m||null===(t=m.msg)||void 0===t?void 0:t.vendor_phone,v_remarks:null===(v=e.data)||void 0===v||null===(_=v.msg)||void 0===_?void 0:_.vendor_remarks,v_gst:null===(c=e.data)||void 0===c||null===(p=c.msg)||void 0===p?void 0:p.vendor_gst,v_pan:null===(h=e.data)||void 0===h||null===(g=h.msg)||void 0===g?void 0:g.vendor_pan,v_reg:null===(u=e.data)||void 0===u||null===(x=u.msg)||void 0===x?void 0:x.vendor_reg,v_address:null===(j=e.data)||void 0===j||null===(A=j.msg)||void 0===A?void 0:A.vendor_address})})).catch((e=>{console.log(e),A("/error/"+e.code+"/"+e.message)})),v.A.post(c.O+"/api/getvendor",{id:a.id}).then((e=>{console.log(e.data.msg.desig_name),y(!1),N({...k,v_name:e.data.msg.vendor_name,v_email:e.data.msg.vendor_email,v_phone:e.data.msg.vendor_phone,v_gst:e.data.msg.vendor_gst,v_pan:e.data.msg.vendor_pan,v_reg:e.data.msg.vendor_reg,v_remarks:e.data.msg.vendor_remarks,v_address:e.data.msg.vendor_address})})),v.A.post(c.O+"/api/getvendorpoc",{id:a.id}).then((e=>{console.log(e.data.msg[0],"res getvendorpoc"),N((a=>({...a,dynamicFields:e.data.msg.map((e=>({sl_no:e.sl_no,poc_name:e.poc_name,poc_ph_1:e.poc_ph_1,poc_ph_2:e.poc_ph_2})))}))),y(!1)})))}),[]),console.log(a,"params"),(0,j.jsx)("section",{className:"bg-white dark:bg-[#001529]",children:(0,j.jsxs)("div",{className:"py-8 mx-auto w-5/6 lg:py-16",children:[(0,j.jsx)(s.A,{text:a.id>0?"Update vendor":"Add vendor"}),(0,j.jsx)(p.A,{indicator:(0,j.jsx)(h.A,{spin:!0}),size:"large",className:"text-green-900 dark:text-gray-400",spinning:l,children:(0,j.jsx)(m.l1,{initialValues:+a.id>0?C:k,validationSchema:f,onSubmit:e=>{console.log("onsubmit called"),console.log(e),y(!0),v.A.post(c.O+"/api/addVendor",{v_id:+a.id,user:localStorage.getItem("email"),v_name:e.v_name,v_email:e.v_email,v_phone:e.v_phone.toString(),v_gst:e.v_gst,v_pan:e.v_pan,v_reg:e.v_reg,v_remarks:e.v_remarks,v_address:e.v_address,v_poc:e.dynamicFields}).then((e=>{y(!1),e.data.suc>0?(0,_.Q)("success",e.data.msg):(0,_.Q)("error",e.data.msg)})).catch((e=>{console.log(e),A("/error/"+e.code+"/"+e.message)}))},validateOnMount:!0,enableReinitialize:!0,children:e=>{let{values:l,handleChange:d,handleBlur:s,handleSubmit:t,errors:v,touched:_}=e;return(0,j.jsxs)("form",{onSubmit:t,children:[(0,j.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 sm:gap-6",children:[(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Type name...",type:"text",label:"Vendor name",name:"v_name",formControlName:l.v_name,handleChange:d,handleBlur:s,mode:1}),v.v_name&&_.v_name?(0,j.jsx)(r.A,{title:v.v_name}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type Phone No....",type:"text",label:"Vendor phone No.",name:"v_phone",formControlName:l.v_phone,handleChange:d,handleBlur:s,mode:1}),v.v_phone&&_.v_phone?(0,j.jsx)(r.A,{title:v.v_phone}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type email...",type:"text",label:"Vendor email",name:"v_email",formControlName:l.v_email,handleChange:d,handleBlur:s,mode:1}),v.v_email&&_.v_email?(0,j.jsx)(r.A,{title:v.v_email}):null]}),(0,j.jsx)("div",{className:"sm:col-span-2 -mt-4",children:(0,j.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3 sm:gap-6",children:[(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type GST...",type:"text",label:"GST",name:"v_gst",formControlName:l.v_gst,handleChange:d,handleBlur:s,mode:1}),v.v_gst&&_.v_gst?(0,j.jsx)(r.A,{title:v.v_gst}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type PAN...",type:"text",label:"PAN",name:"v_pan",formControlName:l.v_pan,handleChange:d,handleBlur:s,mode:1}),v.v_pan&&_.v_pan?(0,j.jsx)(r.A,{title:v.v_pan}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-1",children:[(0,j.jsx)(i.A,{placeholder:"Type registration. no. ...",type:"text",label:"Registration no.",name:"v_reg",formControlName:l.v_reg,handleChange:d,handleBlur:s,mode:1}),v.v_reg&&_.v_reg?(0,j.jsx)(r.A,{title:v.v_reg}):null]})]})}),(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Lorem Ipsum Dolor Sit...",type:"text",label:"Deals in",name:"v_remarks",formControlName:l.v_remarks,handleChange:d,handleBlur:s,mode:3}),v.v_remarks&&_.v_remarks?(0,j.jsx)(r.A,{title:v.v_remarks}):null]}),(0,j.jsxs)("div",{className:"sm:col-span-2",children:[(0,j.jsx)(i.A,{placeholder:"Type vendor address here...",type:"text",label:"Address",name:"v_address",formControlName:l.v_address,handleChange:d,handleBlur:s,mode:3}),v.v_address&&_.v_address?(0,j.jsx)(r.A,{title:v.v_address}):null]}),(0,j.jsx)(m.ED,{name:"dynamicFields",children:e=>{var a;let{push:o,remove:m}=e;return(0,j.jsxs)(j.Fragment,{children:[null===(a=l.dynamicFields)||void 0===a?void 0:a.map(((e,a)=>{var l,o,t,c,p,h,u,x,y,A,C,N;return(0,j.jsxs)(n.Fragment,{children:[(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)(i.A,{placeholder:"Type contact person name...",type:"text",label:"Contact person name",name:"dynamicFields[".concat(a,"].poc_name"),formControlName:e.poc_name,handleChange:d,handleBlur:s,mode:1}),null!==(l=v.dynamicFields)&&void 0!==l&&null!==(o=l[a])&&void 0!==o&&o.poc_name&&null!==(t=_.dynamicFields)&&void 0!==t&&null!==(c=t[a])&&void 0!==c&&c.poc_name?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_name}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type contact person phone...",type:"text",label:"Contact person phone no.",name:"dynamicFields[".concat(a,"].poc_ph_1"),formControlName:e.poc_ph_1,handleChange:d,handleBlur:s,mode:1}),null!==(p=v.dynamicFields)&&void 0!==p&&null!==(h=p[a])&&void 0!==h&&h.poc_ph_1&&null!==(u=_.dynamicFields)&&void 0!==u&&null!==(x=u[a])&&void 0!==x&&x.poc_ph_1?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_ph_1}):null]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(i.A,{placeholder:"Type contact person phone...",type:"text",label:"Contact person phone no.",name:"dynamicFields[".concat(a,"].poc_ph_2"),formControlName:e.poc_ph_2,handleChange:d,handleBlur:s,mode:1}),null!==(y=v.dynamicFields)&&void 0!==y&&null!==(A=y[a])&&void 0!==A&&A.poc_ph_2&&null!==(C=_.dynamicFields)&&void 0!==C&&null!==(N=C[a])&&void 0!==N&&N.poc_ph_2?(0,j.jsx)(r.A,{title:v.dynamicFields[a].poc_ph_2}):null]}),(0,j.jsx)("div",{className:"sm:col-span-2",children:(0,j.jsx)(g.A,{onClick:()=>m(a)})})]},a)})),(0,j.jsx)("div",{className:"sm:col-span-2",children:(0,j.jsx)(x.Ay,{type:"dashed",onClick:()=>o({sl_no:0,poc_name:"",poc_ph_1:""}),icon:(0,j.jsx)(u.A,{}),children:"Add field"})})]})}})]}),(0,j.jsx)(o.A,{mode:a.id>0?"E":"A"})]})}})})]})})}}}]);
//# sourceMappingURL=1172.734e7b57.chunk.js.map